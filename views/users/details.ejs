<%- include('../layouts/header') %>
<div class="p-3 text-center bg-white border-bottom">
  <div class="container">
    <div class="row gy-3">
      <!-- Left elements -->
      <div class="col-lg-2 col-md-3 col-sm-6 col-12">
        <a href="/home" style="text-decoration: none;">
          <div class="text-center">
            <h2 class="h2 text-dark" style="white-space: nowrap; text-decoration: none; font-weight:bolder"><b>S & J Mart</b></h2>
          </div>
        </a>
      </div>
      
      <!-- Left elements -->

      <!-- Center elements -->
      <div class="order-lg-last  col-lg-5 col-sm-8 col-8">
        <div class="d-flex float-end align-items-center">
          <a href="/loadCart" class="me-1 border rounded py-1 px-3 nav-link d-flex align-items-center btn btn-outline-dark"> <i
              class="fas fa-shopping-cart m-1 me-md-2"></i>
            <p class="d-none d-md-block mb-0"  style="display: inline; white-space: nowrap;">My cart </p>
          </a>
          <a href="/loadWishlist" class="me-1 border rounded py-1 px-3 nav-link d-flex align-items-center btn btn-outline-dark"> <i
              class="fas fa-heart  m-1 me-md-2"></i>
            <p class="d-none d-md-block mb-0">Wishlist</p>
          </a>
          <a href="/loadShop" class="me-1 border rounded py-1 px-3 nav-link d-flex align-items-center btn btn-outline-dark"> <i
              class="fas fa-store m-1 me-md-2 " ></i>
            <p class="d-none d-md-block mb-0">Shop</p> 
            <a href="/userProfile" class="me-1 border rounded py-1 px-3 nav-link d-flex align-items-center btn btn-outline-dark"> <i
                class="fas fa-user m-1 me-md-2" ></i>
              <p class="d-none d-md-block mb-0">Profile</p>
            </a>
            <a href="/logout" class="border rounded py-1 px-3 nav-link d-flex align-items-center btn btn-outline-dark"> <i
                class="fas fa-sign-out-alt m-1 me-md-2"></i>
              <p style="color: red;display: inline; white-space: nowrap;" class="d-none d-md-block mb-0">log out</p>
            </a>
        </div>
      </div>
      <!-- Center elements -->

      <!-- Right elements -->
      <div class="col-lg-5 col-md-12 col-12">
        <div class="input-group float-center">
          <form action="">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search" name="search" id="search"
                    onkeyup="update()">
            </div>
        </form>
          <button type="button" class="btn btn-secondary shadow-0">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
      <!-- Right elements -->
    </div>
  </div>
</div>
<!-- Jumbotron -->
  <div class="container-fluid">
    <div class="row px-xl-5">
        <div class="col-12">
            <nav class="breadcrumb bg-light mb-30">
                <a class="breadcrumb-item text-dark" href="/home">Home</a>
                <a class="breadcrumb-item text-dark" href="/loadShop">Shop</a>
                <span class="breadcrumb-item active">Shop Detail</span>
            </nav>
        </div>
    </div>
</div>

<div class="container-fluid pb-5">
  <div class="row px-xl-5">
    <% for(i=0; i<detail.images.length; i++) { %>
      <div class="col-md-6 position-relative">
        <div class="d-flex justify-content-center p-3">
          <div id="img-container" class="img-cont">
            <img id="main-image" class="main-image img-responsive" src="/productImages/<%=detail.images[i]%>" alt="">
          </div>
          
        </div>
        <div class="d-flex px-5 justify-content-center">
          <div class="col-2 d-flex justify-content-center mx-3">
            <div class="card product-alt-card p-2">
              <img class="product-alt-images img-responsive" id="image1" onclick="changeImage(this)"
                src="/productImages/<%=detail.images[i]%>" alt="">
            </div>
          </div>
          <div class="col-2 d-flex justify-content-center mx-3">
            <div class="card product-alt-card p-2">
              <img class="product-alt-images img-responsive" id="image2" onclick="changeImage(this)"
                src="/productImages/<%=detail.images[i+1]%>" alt="">
            </div>
          </div>
          <div class="col-2 d-flex justify-content-center mx-3">
            <div class="card product-alt-card p-2">
              <img class="product-alt-images img-responsive" id="image3" onclick="changeImage(this)" src="/productImages/<%=detail.images[i+2]%>"
                alt="">
            </div>
          </div>
        </div>
      </div>
      <% break; } %>

      <div class="col-md-6 h-auto mb-30">
        <div class="h-100 p-30">
          <br>
          <h2 class="text-uppercase"><%=detail.title%></h2>
          <h3 class="font-weight-semi-bold mb-4">Rs <%=detail.price%></h3>
          <p class="mb-4"><%=detail.description%></p>
          <div class="d-flex mb-3">
            <!-- <strong class="text-dark mr-3">Sizes:</strong> -->
            <form>
              <!-- form content here -->
            </form>
          </div>
          <% if(detail.quantity <= 5) { %>
            <% if(detail.quantity < 1) { %>
              <h6 style="color: red;">Stock Out!!</h6>
              <a href="/addWishlist?id=<%=detail._id%>"><button class="btn btn-secondary px-3"><i class="fa fa-shopping-cart mr-1"></i> Add To Wishlist</button></a>
              <a href="/addToCart?id=<%=detail._id%>"><button class="btn btn-primary px-3" disabled><i class="fa fa-shopping-cart mr-1 "></i> Add To Cart</button></a>
            <% } else { %>
              <h6 style="color: red;">Only <%=detail.quantity%> left</h6>
              <a href="/addWishlist?id=<%=detail._id%>"><button class="btn btn-secondary px-3"><i class="fa fa-shopping-cart mr-1"></i> Add To Wishlist</button></a>
              <a href="/addToCart?id=<%=detail._id%>"><button class="btn btn-primary px-3"><i class="fa fa-shopping-cart mr-1"></i> Add To Cart</button></a>
            <% } %>
          <% } else { %>
            <a href="/addWishlist?id=<%=detail._id%>"><button class="btn btn-secondary px-3"><i class="fa fa-shopping-cart mr-1"></i> Add To Wishlist</button></a>
            <a href="/addToCart?id=<%=detail._id%>"><button class="btn btn-primary px-3"><i class="fa fa-shopping-cart mr-1"></i> Add To Cart</button></a>
          <% } %>
        </div>
        <div>
          <h5 class="" style="color: green;"><%=message%></h5>
        </div>
      </div>
  </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/js-image-zoom/js-image-zoom.min.js"></script> 
<script src="/script/scriptadmin.js"></script>

<script>
  const mainimage = document.getElementById("main-image")
  function changeImage(image) {
    mainimage.src = image.src
    new ImageZoom(document.getElementById("img-container"), options);
  }
  var options = {
    width: 300,
    height: 350,
    zoomWidth: 300,
    



    // required
    // more options here
  };
  new ImageZoom(document.getElementById("img-container"), options);

</script>
<style>
  .img-cont {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 300px; /* Adjust the height as needed */
}

.main-image {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

</style>


  <%- include('../layouts/footer') %>